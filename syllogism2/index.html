code
Html
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> 住拽 (专住转 驻住驻)</title>
    <!-- Include D3.js and the venn.js library from a CDN -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/venn.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #1c1e21;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            line-height: 1.6;
        }
        #game-container {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 700px;
            padding: 24px;
            text-align: center;
        }
        h1 {
            color: #0d3b66;
            font-size: 2.2em;
            margin-bottom: 20px;
        }
        #premises-container {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
            font-size: 1.2em;
        }
        .premise {
            margin-bottom: 10px;
        }
        #options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .option-btn {
            background-color: #faf0e6;
            color: #333;
            border: 2px solid #d3c0b3;
            border-radius: 8px;
            padding: 14px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            width: 100%;
        }
        .option-btn:hover:not(:disabled) {
            background-color: #eaddd7;
            transform: translateY(-2px);
        }
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        #feedback-container {
            margin-top: 24px;
            padding: 16px;
            border-radius: 8px;
            display: none; /* Hidden by default */
        }
        .feedback-text {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 16px;
        }
        #venn-diagram {
            margin: 0 auto;
        }
        .control-button {
            margin-top: 20px;
            background-color: #0d3b66;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1em;
            border-radius: 5px;
            cursor: pointer;
            display: none; /* Hidden initially */
        }
    </style>
</head>
<body>

<div id="game-container">
    <h1 id="stage-title"> 住拽</h1>
    <div id="premises-container"></div>
    <div id="options-container"></div>
    <div id="feedback-container">
        <div class="feedback-text"></div>
        <div id="venn-diagram"></div>
    </div>
    <button id="continue-button" class="control-button">砖 砖 </button>
    <button id="restart-button" class="control-button" onclick="init()">砖拽/ 砖!</button>
</div>

<script>
    const mazeData = [
        {
            id: 'start',
            title: ' 住拽 (专住转 驻住驻)',
            premises: [
                '专 ! 驻  砖 注  注 驻住驻 (注转 住).',
                ' 砖, 注 专 住拽  注转 *专* 转. 爪!'
            ],
            options: [
                { text: '转, 转专 转!', isCorrect: true, nextStage: 1 }
            ]
        },
        {
            id: 1,
            title: '砖 1:  专 砖砖',
            premises: [
                ' \':  驻专爪住 住 专拽 注  砖 专.',
                ' \': 祝 驻专爪住  拽 专 砖砖 驻.'
            ],
            options: [
                { text: '住拽: ,   砖拽 专 砖砖 驻  驻专爪住.', isCorrect: true, nextStage: 2 },
                { text: '住拽: , 拽 驻专爪住 拽 专 砖砖 驻 砖.', isCorrect: false, feedback: ' . 住拽  转,   注转 *专* 转.  专  专 注 拽 砖转.' },
                { text: '住拽: ,  砖  住 专拽 注  砖 专,  拽 专 驻.', isCorrect: false, feedback: ' .  注转 转 砖 "砖转 专砖".' }
            ],
            vennData: [{ sets: ['住 注 专'], size: 12 }, { sets: ['拽 专 驻'], size: 8 }, { sets: ['驻专爪住'], size: 4 }, { sets: ['住 注 专', '驻专爪住'], size: 4 }]
        },
        {
            id: 2,
            title: '砖 2: 住转 住',
            premises: [
                ' \': 拽 住拽 专 住专 专砖转.',
                ' \':   砖专 住专 专砖转  砖专 爪 注 住转.'
            ],
            options: [
                { text: '住拽: ,  砖专 住转  住拽.', isCorrect: false, feedback: ' . 转 砖专 住转 砖 住拽  专 住专 专砖转.' },
                { text: '住拽: , 拽 住拽  砖专 爪 注 住转.', isCorrect: true, nextStage: 3 },
                { text: '住拽: , 拽 砖专 住转  住拽.', isCorrect: false, feedback: ' . 住拽   注转 转 转转.' }
            ],
            vennData: [{ sets: ['砖专 住转'], size: 12 }, { sets: ['专 住专 专砖转'], size: 8 }, { sets: ['住拽'], size: 8 }, { sets: ['砖专 住转', '专 住专 专砖转'], size: 8 }, { sets: ['专 住专 专砖转', '住拽'], size: 2 }]
        },
        {
            id: 3,
            title: '砖 3:  砖, 砖注...',
            premises: [
                ' \':  拽专  住驻拽,   拽.',
                ' \': 拽专  住驻拽.'
            ],
            options: [
                { text: '住拽: , 拽专 拽.', isCorrect: true, nextStage: 4 },
                { text: '住拽: ,  拽专 拽,    住驻拽.', isCorrect: false, feedback: ' .  注转 转 砖 "砖专 住专". 拽   转 住驻拽.' },
                { text: '住拽: ,  拽专  拽,    住驻拽.', isCorrect: false, feedback: ' 住拽  转 (Modus Tollens),     砖注 砖专转 转 转转.' }
            ]
        },
        {
            id: 4,
            title: '砖 4: 专砖转 拽转 驻住专转',
            premises: [
                ' \':  驻住专住 砖 砖 拽住.',
                ' \': 专砖转 拽转 砖  拽住.'
            ],
            options: [
                { text: '住拽: , 专砖转 拽转 砖  驻住专住转.', isCorrect: false, feedback: ' !  注转 转 拽住转. 专拽  砖砖转 拽爪转 拽转 转 转 (转 拽住),   驻 转 专 砖.' },
                { text: '住拽: , 拽 拽住  驻住专住.', isCorrect: false, feedback: ' 注  砖注爪,    注转 *专* 转 砖转 .' },
                { text: '住拽: ,  转 住拽 住拽 专转.', isCorrect: true, nextStage: 5 }
            ],
            vennData: [{ sets: ['专 砖 拽住'], size: 12 }, { sets: ['驻住专住'], size: 4 }, { sets: ['专砖转 拽转'], size: 1 }, { sets: ['专 砖 拽住', '驻住专住'], size: 4 }, { sets: ['专 砖 拽住', '专砖转 拽转'], size: 1 }]
        },
        {
            id: 5,
            title: '砖 5: \' ',
            premises: [
                ' \': 祝 驻住祝   砖转砖 \' 专 拽.',
                ' \': 拽 专爪 爪注专 砖转砖 \'  住.'
            ],
            options: [
                { text: '住拽: , 拽 专爪 爪注专  驻住驻 .', isCorrect: false, feedback: ' . 转 专转 注 砖砖 \' 拽砖专 砖 (专  ).  转 住拽  专.' },
                { text: '住拽: , 祝 专爪 爪注专  驻住祝 .', isCorrect: false, feedback: ' .   专驻转 砖 转转 注  转.' },
                { text: '住拽: ,  转 住拽 住拽 专转 注 住 转 .', isCorrect: true, nextStage: 'end' }
            ]
        },
        {
            id: 'end',
            title: '住转 转 !',
          premises: [
    '转 砖转/ /  住 拽 驻住驻转.',
    '注转,  住拽 专 住:',
    ' \':  驻住驻 爪 住拽转 住拽转 转拽驻转.',
    ' \':  转转 住转 住拽 住拽转 转拽驻转.',
    '住拽 驻砖专转: ,  转转 砖 转 驻住驻.',
    '...专注,  住拽  转 注转 转?  砖 拽  转 砖转  住 砖 驻住驻住转? '
],
            options: []
        }
    ];

    let currentStageId = 'start';
    const titleEl = document.getElementById('stage-title');
    const premisesEl = document.getElementById('premises-container');
    const optionsEl = document.getElementById('options-container');
    const feedbackEl = document.getElementById('feedback-container');
    const feedbackTextEl = feedbackEl.querySelector('.feedback-text');
    const vennEl = document.getElementById('venn-diagram');
    const continueBtn = document.getElementById('continue-button');
    const restartBtn = document.getElementById('restart-button');

    function drawVenn(vennData) {
        vennEl.innerHTML = '';
        if (!vennData) return;
        try {
            const chart = venn.VennDiagram().width(350).height(300);
            d3.select("#venn-diagram").datum(vennData).call(chart);
            d3.selectAll("#venn-diagram .venn-circle path").style("fill-opacity", 0.5).style("stroke-width", 2).style("stroke", "#333");
            d3.selectAll("#venn-diagram text").style("font-family", "Arial, sans-serif").style("font-size", "14px").style("fill", "#000");
        } catch (e) {
            console.error("Venn diagram error:", e);
        }
    }

    function handleOptionClick(option) {
        const stage = mazeData.find(s => s.id === currentStageId);
        
        feedbackEl.style.display = 'block';
        document.querySelectorAll('.option-btn').forEach(btn => btn.disabled = true);

        if (option.isCorrect) {
            feedbackTextEl.textContent = ' !';
            feedbackTextEl.style.color = '#1e8e3e';
            drawVenn(stage.vennData);
            
            if (option.nextStage) {
                continueBtn.style.display = 'block';
                continueBtn.onclick = () => {
                    currentStageId = option.nextStage;
                    renderStage(currentStageId);
                };
            }
        } else {
            feedbackTextEl.textContent = option.feedback;
            feedbackTextEl.style.color = '#d93025';
            drawVenn(stage.vennData);
            
            setTimeout(() => {
                document.querySelectorAll('.option-btn').forEach(btn => btn.disabled = false);
                feedbackEl.style.display = 'none';
            }, 5000);
        }
    }

    function renderStage(stageId) {
        const stage = mazeData.find(s => s.id === stageId);
        if (!stage) return;

        feedbackEl.style.display = 'none';
        continueBtn.style.display = 'none';
        
        titleEl.textContent = stage.title;
        premisesEl.innerHTML = '';
        stage.premises.forEach(p => {
            const pElement = document.createElement('div');
            pElement.innerHTML = p; // Use innerHTML to render emoji
            pElement.className = 'premise';
            premisesEl.appendChild(pElement);
        });

        optionsEl.innerHTML = '';
        stage.options.forEach(option => {
            const button = document.createElement('button');
            button.className = 'option-btn';
            button.textContent = option.text;
            button.onclick = () => handleOptionClick(option);
            optionsEl.appendChild(button);
        });
        
        restartBtn.style.display = (stage.id === 'end') ? 'block' : 'none';
        if (stage.id === 'end') {
             optionsEl.style.display = 'none';
        } else {
             optionsEl.style.display = 'flex';
        }
    }
    
    function init() {
        currentStageId = 'start';
        renderStage('start');
    }

    document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
